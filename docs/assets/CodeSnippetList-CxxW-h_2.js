import{_ as ke}from"./CodeIcon-RG0Qs4FB.js";import{d as te,u as oe,i as t,j as ne,s as se,e as le,c as f,k as m,l as v,o as y,a as J,m as n,g as $,w as i,t as F,b as l,p as x,E as _e,v as Se,_ as ie,O as ye,x as we,bv as Ve,y as be,z as Ee,A as N,B as Le,bR as Ie,G as W,f as De,C as Be,n as I,F as Fe,D as Ne,a8 as Te,aa as ee,K as Ue,L as Re,M as Ae,N as Me,X as $e}from"./index-D767YE15.js";import{E as He}from"./el-empty-C55xF_EA.js";import{E as ze}from"./el-affix-CLjdDRlv.js";/* empty css                        */import{E as Oe}from"./el-drawer-DakVXP-_.js";import{l as Pe}from"./vue-draggable-plus-B7hlTZXz.js";const Ge={class:"content drag-handle"},je={class:"info"},qe={class:"menu"},Ke=te({__name:"CodeSnippetListItem",props:{id:{type:String,required:!0},showHover:{type:Boolean,default:!0}},emits:["editFile","openFile","delCodeSnippets","editInfo"],setup(Q,{emit:w}){oe(p=>({"3fd7903e":t(R),"0a15fa3a":t(H),"51da1863":t(O),"3e3ee18b":t(z),c4c7c462:t(T)}));const D=ne();se(D);const{appAsideBgColor:H,appBackground:z}=le(),V=Q,T=f(()=>V.showHover?"4px":"0px"),O=f(()=>V.showHover?"all 0.5s":"none"),c=w,k=f(()=>m().mockCodeSnippetList.value.find(p=>p.id===V.id)),r=f(()=>m().mockCodeSnippetList.value.findIndex(p=>p.id===V.id)),b=v(!1),P=()=>{r.value!==void 0&&r.value!==-1&&c("delCodeSnippets",r.value)},G=()=>{r.value!==void 0&&r.value!==-1&&c("editFile",r.value)},j=()=>{r.value!==void 0&&r.value!==-1&&c("editInfo",r.value)},q=()=>{r.value!==void 0&&r.value!==-1&&c("openFile",r.value)},U=v(),R=f(()=>b.value?40+U.value.clientHeight+"px":"40px");return(p,o)=>{const _=_e,E=Se,g=ke;return y(),J("div",{class:"code-snippet-item",onClick:o[4]||(o[4]=u=>b.value=!t(b))},[n("div",Ge,[n("div",je,[t(b)?(y(),$(_,{key:1,class:"icon",size:"large"},{default:i(()=>o[6]||(o[6]=[n("div",{"i-solar-alt-arrow-down-line-duotone":""},null,-1)])),_:1})):(y(),$(_,{key:0,class:"icon",size:"large"},{default:i(()=>o[5]||(o[5]=[n("div",{"i-solar-alt-arrow-right-line-duotone":""},null,-1)])),_:1})),n("span",null,F(t(k).name),1)]),n("div",qe,[l(E,{class:"box-item",effect:"dark",content:"删除代码片段",placement:"bottom"},{default:i(()=>[l(_,{class:"icon",onClick:x(P,["stop"])},{default:i(()=>o[7]||(o[7]=[n("span",{"i-mdi-file-document-remove-outline":""},null,-1)])),_:1})]),_:1}),l(E,{class:"box-item",effect:"dark",content:"编辑代码片段",placement:"bottom"},{default:i(()=>[l(g,{class:"icon",onClick:x(G,["stop"])})]),_:1}),l(E,{class:"box-item",effect:"dark",content:"修改代码片段信息",placement:"bottom"},{default:i(()=>[l(_,{class:"icon",onClick:x(j,["stop"])},{default:i(()=>o[8]||(o[8]=[n("span",{"i-mdi-playlist-edit":""},null,-1)])),_:1})]),_:1}),l(E,{class:"box-item",effect:"dark",content:"打开代码片段",placement:"bottom"},{default:i(()=>[l(_,{class:"icon",onClick:x(q,["stop"])},{default:i(()=>o[9]||(o[9]=[n("span",{"i-mdi-folder-eye-outline":""},null,-1)])),_:1})]),_:1})])]),n("div",{class:"details",ref_key:"detailsRef",ref:U},[o[10]||(o[10]=n("div",null,"代码片段ID：",-1)),n("div",{class:"text",onClick:o[0]||(o[0]=x(()=>{},["stop"]))},F(t(k).id),1),o[11]||(o[11]=n("div",null,"前缀：",-1)),n("div",{class:"text",onClick:o[1]||(o[1]=x(()=>{},["stop"]))},F(t(k).prefix),1),o[12]||(o[12]=n("div",null,"保存路径：",-1)),n("div",{class:"text",onClick:o[2]||(o[2]=x(()=>{},["stop"]))},F(t(k).filePath),1),o[13]||(o[13]=n("div",null,"代码片段描述(备注)：",-1)),n("div",{class:"description",onClick:o[3]||(o[3]=x(()=>{},["stop"]))},F(t(k).description),1)],512)])}}}),We=ie(Ke,[["__scopeId","data-v-180c297d"]]),Xe={class:"container-root"},Je={class:"code-snippet-list-div"},Qe={class:"dialog-footer"},Ye={class:"dialog-footer"},Ze={class:"header"},he={class:"header-right"},et={class:"list","h-full":""},X="snippet-editor",tt=te({__name:"CodeSnippetList",setup(Q){oe(s=>({"8f9a8652":t(fe),e8b065c0:t(ce),"5bc97c34":t(A)}));const w=v(!1),D=v(""),H=ne();se(H);const z=f(()=>{var s;return((s=m().mockCodeSnippetList.value.find(e=>e.id===D.value))==null?void 0:s.name)||""}),V=v();let T=()=>{};const{saveDialog:O,saveConfig:c,showCopyBtn:k}=$e(),r=v(!0),{editorInit:b,disposeEditor:P,findEditor:G,setText:j,editorValue:q}=ye(),U=()=>{r.value=!1},R=()=>{r.value=!0},p=v(!1),o=s=>{T=async()=>{{m().mockCodeSnippetList.value.splice(s,1),W({title:"提示",message:"删除成功",type:"success",position:"bottom-right"}),p.value=!1;return}},p.value=!0},_=/export \{\s?\};?/g,E=async s=>{w.value=!0,await Te();const e=m().mockCodeSnippetList.value[s];D.value=e.id,G(X)||await b(X,!1,!1);const d=e.content;j(X,`export {};
`+(d==null?void 0:d.trim())||"")},g=v(!1),u=we({name:"",description:"",prefix:""});let Y=()=>{},Z="";const ae=async s=>{const e=m().mockCodeSnippetList.value[s];u.name=e.name,Z=e.name,u.description=e.description,u.prefix=e.prefix,Y=()=>{if(m().mockCodeSnippetList.value.find(L=>L.name===u.name)&&Z!==u.name){ee.warning("已存在相同名称的代码片段，换个名字试试吧");return}const d=m().mockCodeSnippetList.value[s];d.name=u.name,d.description=u.description,d.prefix=u.prefix,g.value=!1,ee.success("修改成功")},g.value=!0},de=async s=>{const e=q.value.replace(_,""),S=m().mockCodeSnippetList.value.find(L=>L.id===D.value);if(!S){s();return}const d=S.content;e.trim()!==(d==null?void 0:d.trim())&&Ie.confirm("代码已经修改,是否保存?","提示",{confirmButtonText:"保存",cancelButtonText:"不保存",distinguishCancelAndClose:!0}).then(async()=>{{S.content=e,W({title:"提示",message:"保存成功",type:"success",position:"bottom-right"}),s();return}}).catch(s),s()},re=async s=>{{W({title:"提示",message:"playground环境无法打开代码片段文件",type:"warning",position:"bottom-right"});return}},ue=()=>{c.code="",c.name="操作记录",c.description="",c.prefix="",O.value=!0,k.value=!1},pe=async()=>{{const s=m().mockCodeSnippetList;s.value.push({id:Ue(),name:"操作记录"+s.value.length,description:"操作记录"+s.value.length,prefix:"test"+s.value.length,content:"",filePath:"playground"});return}},C=v(""),me=f(()=>C.value!==""),B=f({get:()=>C.value===""?m().mockCodeSnippetList.value:m().mockCodeSnippetList.value.filter(e=>e.name.toLowerCase().includes(C.value.toLowerCase())||e.description.toLowerCase().includes(C.value.toLowerCase())||e.prefix.toLowerCase().includes(C.value.toLowerCase())),set:s=>{m().mockCodeSnippetList.value=s}}),{appAsideBgColor:K,appBackground:A}=le(),{isEditing:h}=De(),fe=f(()=>h.value?K==null?void 0:K.value:A==null?void 0:A.value),ce=f(()=>h.value?"0":"10px 10px 10px 0");return Ve(()=>{P()}),be(()=>{Ee.closeSplashscreen()}),(s,e)=>{const S=Oe,d=Re,L=Be,M=Ae,ve=Me,ge=ze,Ce=He,xe=We;return y(),J("div",Xe,[l(S,{modelValue:t(w),"onUpdate:modelValue":e[0]||(e[0]=a=>N(w)?w.value=a:null),title:t(z),"before-close":de,direction:"ltr",size:"80%",class:"orp-drawer"},{default:i(()=>e[10]||(e[10]=[n("div",{id:"snippet-editor","w-full":"","h-full":""},null,-1)])),_:1},8,["modelValue","title"]),n("div",Je,[l(L,{modelValue:t(p),"onUpdate:modelValue":e[2]||(e[2]=a=>N(p)?p.value=a:null),title:"删除代码片段"},{footer:i(()=>[n("span",Qe,[l(d,{onClick:e[1]||(e[1]=a=>p.value=!1)},{default:i(()=>e[11]||(e[11]=[I("取消")])),_:1}),l(d,{type:"danger",onClick:t(T)},{default:i(()=>e[12]||(e[12]=[I("删除")])),_:1},8,["onClick"])])]),default:i(()=>[e[13]||(e[13]=n("div",null,"确定要删除该代码片段吗?",-1))]),_:1},8,["modelValue"]),l(L,{modelValue:t(g),"onUpdate:modelValue":e[7]||(e[7]=a=>N(g)?g.value=a:null),title:"编辑代码片段信息"},{footer:i(()=>[n("span",Ye,[l(d,{onClick:e[6]||(e[6]=a=>g.value=!1)},{default:i(()=>e[14]||(e[14]=[I("取消")])),_:1}),l(d,{type:"primary",onClick:t(Y)},{default:i(()=>e[15]||(e[15]=[I("保存")])),_:1},8,["onClick"])])]),default:i(()=>[e[16]||(e[16]=n("div",null,"代码片段名称:",-1)),l(M,{modelValue:t(u).name,"onUpdate:modelValue":e[3]||(e[3]=a=>t(u).name=a)},null,8,["modelValue"]),e[17]||(e[17]=n("div",null,"代码片段描述:",-1)),l(M,{modelValue:t(u).description,"onUpdate:modelValue":e[4]||(e[4]=a=>t(u).description=a)},null,8,["modelValue"]),e[18]||(e[18]=n("div",null,"代码片段前缀:",-1)),l(M,{modelValue:t(u).prefix,"onUpdate:modelValue":e[5]||(e[5]=a=>t(u).prefix=a)},null,8,["modelValue"])]),_:1},8,["modelValue"]),l(ge,{target:".code-snippet-list-div",offset:40},{default:i(()=>[n("div",Ze,[e[21]||(e[21]=n("span",{style:{"font-size":"18px"}},"代码片段列表",-1)),n("div",he,[l(M,{class:"input",modelValue:t(C),"onUpdate:modelValue":e[8]||(e[8]=a=>N(C)?C.value=a:null),clearable:"",placeholder:"搜索代码片段:名称、备注、前缀"},null,8,["modelValue"]),l(ve,null,{default:i(()=>[l(d,{onClick:pe},{default:i(()=>e[19]||(e[19]=[I("导入")])),_:1}),l(d,{type:"primary",onClick:ue},{default:i(()=>e[20]||(e[20]=[I("新建")])),_:1})]),_:1})])])]),_:1}),n("div",et,[t(B).length===0?(y(),$(Ce,{key:0,description:"暂无代码片段","position-absolute":"","top-0":"","bottom-0":"","right-0":"","left-0":""})):Le("",!0),l(t(Pe),{ref_key:"el",ref:V,modelValue:t(B),"onUpdate:modelValue":e[9]||(e[9]=a=>N(B)?B.value=a:null),ghostClass:"ghost",class:"draggable-content",disabled:t(me),animation:200,handle:".drag-handle",onStart:U,onUpdate:R,onEnd:R},{default:i(()=>[(y(!0),J(Fe,null,Ne(t(B),a=>(y(),$(xe,{key:a.id,id:a.id,onEditFile:E,onEditInfo:ae,"show-hover":t(r),onOpenFile:re,onDelCodeSnippets:o},null,8,["id","show-hover"]))),128))]),_:1},8,["modelValue","disabled"])])])])}}}),rt=ie(tt,[["__scopeId","data-v-2897ba3c"]]);export{rt as default};
