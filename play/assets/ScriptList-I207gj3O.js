import{_ as rt}from"./CodeIcon-RG0Qs4FB.js";import{d as Q,u as Z,i as s,j as tt,s as et,e as ot,c as b,k as u,l as E,o as L,a as J,m as e,g as N,w as i,t as I,b as n,n as C,p as S,E as ut,q as dt,v as pt,_ as st,x as ct,y as mt,z as vt,A as j,B as ft,C as gt,F as St,D as _t,I as kt,G as M,H as R,J as yt,K as W,S as Y,L as Ct,M as bt,N as Lt,f as xt}from"./index-D767YE15.js";import{E as wt}from"./el-empty-C55xF_EA.js";import{E as It}from"./el-affix-CLjdDRlv.js";/* empty css                        */import{l as Et}from"./vue-draggable-plus-B7hlTZXz.js";const Vt={class:"content drag-handle"},At={class:"info"},Bt={class:"menu"},Dt=Q({__name:"ScriptListItem",props:{id:{type:String,required:!0},showHover:{type:Boolean,default:!0}},emits:["editorScriptFile","openFile","setScript","runScript","deleteScript"],setup(K,{emit:H}){Z(v=>({"0a155f51":s(q),"6a6ca7b0":s(A),"609e8c70":s(z),"4d035598":s($),"1d1912a2":s(m)}));const U=tt();et(U);const{appAsideBgColor:A,appBackground:$}=ot(),c=K,m=b(()=>c.showHover?"4px":"0px"),z=b(()=>c.showHover?"all 0.5s":"none"),x=H,w=b(()=>u().mockScriptList.value.find(v=>v.id===c.id)),a=b(()=>u().mockScriptList.value.findIndex(v=>v.id===c.id)),_=E(!1),V=()=>{a.value!==void 0&&a.value!==-1&&x("deleteScript",a.value)},h=()=>{a.value!==void 0&&a.value!==-1&&x("editorScriptFile",a.value)},k=()=>{a.value!==void 0&&a.value!==-1&&x("openFile",a.value)},G=()=>{a.value!==void 0&&a.value!==-1&&x("setScript",a.value)},B=()=>{a.value!==void 0&&a.value!==-1&&x("runScript",a.value)},d=E(),q=b(()=>_.value?40+d.value.clientHeight+"px":"40px");return(v,o)=>{const f=ut,O=dt,y=pt,X=rt;return L(),J("div",{class:"script-item",onClick:o[3]||(o[3]=g=>_.value=!s(_))},[e("div",Vt,[e("div",At,[s(_)?(L(),N(f,{key:1,class:"icon",size:"large"},{default:i(()=>o[5]||(o[5]=[e("div",{"i-solar-alt-arrow-down-line-duotone":""},null,-1)])),_:1})):(L(),N(f,{key:0,class:"icon",size:"large"},{default:i(()=>o[4]||(o[4]=[e("div",{"i-solar-alt-arrow-right-line-duotone":""},null,-1)])),_:1})),e("span",null,I(s(w).name),1),n(O,{size:"small",type:"info"},{default:i(()=>[C(I(s(w).version),1)]),_:1})]),e("div",Bt,[n(y,{class:"box-item",effect:"dark",content:"从列表移除",placement:"bottom"},{default:i(()=>[n(f,{class:"icon",onClick:S(V,["stop"])},{default:i(()=>o[6]||(o[6]=[e("span",{"i-mdi-playlist-remove":""},null,-1)])),_:1})]),_:1}),n(y,{class:"box-item",effect:"dark",content:"编辑脚本",placement:"bottom"},{default:i(()=>[n(X,{class:"icon",onClick:S(h,["stop"])})]),_:1}),n(y,{class:"box-item",effect:"dark",content:"打开脚本",placement:"bottom"},{default:i(()=>[n(f,{class:"icon",onClick:S(k,["stop"])},{default:i(()=>o[7]||(o[7]=[e("span",{"i-mdi-folder-eye-outline":""},null,-1)])),_:1})]),_:1}),n(y,{class:"box-item",effect:"dark",content:"脚本设置",placement:"bottom"},{default:i(()=>[n(f,{class:"icon",onClick:S(G,["stop"])},{default:i(()=>o[8]||(o[8]=[e("span",{"i-solar-settings-linear":""},null,-1)])),_:1})]),_:1}),n(y,{class:"box-item",effect:"dark",content:"运行脚本",placement:"bottom"},{default:i(()=>[n(f,{class:"icon",onClick:S(B,["stop"])},{default:i(()=>o[9]||(o[9]=[e("span",{"i-mdi-play-circle-outline":""},null,-1)])),_:1})]),_:1})])]),e("div",{class:"details",ref_key:"detailsRef",ref:d},[o[10]||(o[10]=e("div",null,"脚本ID：",-1)),e("div",{class:"text",onClick:o[0]||(o[0]=S(()=>{},["stop"]))},I(s(w).id),1),o[11]||(o[11]=e("div",null,"保存路径：",-1)),e("div",{class:"text",onClick:o[1]||(o[1]=S(()=>{},["stop"]))},I(s(w).savePath),1),o[12]||(o[12]=e("div",null,"脚本描述(备注)：",-1)),e("div",{class:"description",onClick:o[2]||(o[2]=S(()=>{},["stop"]))},I(s(w).description),1)],512)])}}}),Tt=st(Dt,[["__scopeId","data-v-7ac4f5a8"]]),Ft={class:"script-list-div"},Pt={class:"dialog-footer"},Mt={class:"dialog-footer"},Rt={class:"header"},Nt={class:"header-right"},Ht={class:"list"},Ut=Q({__name:"ScriptList",setup(K){Z(l=>({e9d41624:s(h)}));const H=kt,U=E();let A=()=>{};const $=tt(),{scriptList:c}=et($),{openId:m,curScriptDir:z,preloadPath:x,preloadText:w,contentTransform:a,asideBarPos:_}=xt(),V=E(!0),{appBackground:h}=ot(),k=ct({visible:!1,content:"",newImport:()=>{},updateImport:()=>{}}),G=()=>{V.value=!1},B=()=>{V.value=!0},d=E(!1),q=l=>{A=()=>{u().mockScriptList.value.splice(l,1),M({title:"提示",message:"删除成功",type:"success",position:"bottom-right"}),d.value=!1},d.value=!0},v=l=>{var F,P;a.value="translateX(-100%)",R.replace("/script/editor");let t=(F=c.value[l])==null?void 0:F.id,p="";t=(P=u().mockScriptList.value[l])==null?void 0:P.id,p="E:\\playground",t===m.value&&(m.value="-1");const T=setTimeout(async()=>{m.value=t,z.value=p||await yt.resolve(c.value[l].savePath,"../"),clearTimeout(T)},100);_.value="absolute"},o=async l=>{{M({title:"提示",message:"playground环境不支持打开文件",type:"warning",position:"bottom-right"});return}},f=()=>{{const l=W(),t="v1."+Math.floor(Math.random()*10);u().mockScriptList.value.push({id:l,savePath:"内部存储",name:l,version:t,description:"playground环境测试脚本",setting:{autoImportLastRunConfig:!0,targetAdbDevice:"",excludeDevice:[],targetApp:"",autoStartTargetApp:!1},content:Y(l,t,"playground环境测试脚本")}),M({title:"提示",message:"创建成功",type:"success",position:"bottom-right"}),m.value=l,R.replace({path:"/script/editor"}),a.value="translateX(-100%)",_.value="absolute";return}},O=async()=>{{const l=W(),t="v1."+Math.floor(Math.random()*10);u().mockScriptList.value.push({id:l,savePath:"内部存储",name:l,version:t,description:"playground环境测试脚本",setting:{autoImportLastRunConfig:!0,targetAdbDevice:"",excludeDevice:[],targetApp:"",autoStartTargetApp:!1},content:Y(l,t,"playground环境测试脚本")}),M({title:"提示",message:"导入成功",type:"success",position:"bottom-right"});return}},y=async l=>{m.value=u().mockScriptList.value[l].id,R.replace("/script/run")},X=l=>{m.value=u().mockScriptList.value[l].id,R.replace("/script/setting")},g=E(""),lt=b(()=>g.value!==""),D=b({get:()=>g.value===""?u().mockScriptList.value:u().mockScriptList.value.filter(l=>l.name.toLowerCase().includes(g.value.toLowerCase())||l.description.toLowerCase().includes(g.value.toLowerCase())),set:l=>{{u().mockScriptList.value=l;return}}});return mt(()=>{vt.closeSplashscreen()}),(l,t)=>{const p=Ct,T=gt,F=bt,P=Lt,it=It,nt=wt,at=Tt;return L(),J("div",Ft,[n(T,{modelValue:s(k).visible,"onUpdate:modelValue":t[0]||(t[0]=r=>s(k).visible=r),title:"脚本导入"},{footer:i(()=>[e("span",Pt,[n(p,{onClick:s(k).newImport},{default:i(()=>t[5]||(t[5]=[C("作为新脚本导入")])),_:1},8,["onClick"]),n(p,{onClick:s(k).updateImport},{default:i(()=>t[6]||(t[6]=[C("更新同名脚本")])),_:1},8,["onClick"])])]),default:i(()=>[e("div",null,I(s(k).content),1),t[7]||(t[7]=e("div",null,"作为新脚本导入：",-1)),t[8]||(t[8]=e("div",null," 此选项会在脚本列表新增一项脚本，该脚本无法继承同名脚本配置(id不一致) ",-1)),t[9]||(t[9]=e("div",null,"更新同名脚本：",-1)),t[10]||(t[10]=e("div",null," 此选项会将新脚本内容覆盖掉同名脚本，该脚本可以继承同名脚本配置(id一致) ",-1))]),_:1},8,["modelValue"]),n(T,{modelValue:s(d),"onUpdate:modelValue":t[2]||(t[2]=r=>j(d)?d.value=r:null),title:"删除脚本"},{footer:i(()=>[e("span",Mt,[n(p,{onClick:t[1]||(t[1]=r=>d.value=!1)},{default:i(()=>t[11]||(t[11]=[C("取消")])),_:1}),n(p,{type:"danger",onClick:s(A)},{default:i(()=>t[12]||(t[12]=[C("删除")])),_:1},8,["onClick"])])]),default:i(()=>[t[13]||(t[13]=e("div",null,"确定要删除该脚本吗?",-1))]),_:1},8,["modelValue"]),n(it,{target:".script-list-div",offset:40},{default:i(()=>[e("div",Rt,[t[16]||(t[16]=e("span",{style:{"font-size":"18px"}},"脚本列表",-1)),e("div",Nt,[n(F,{class:"input",modelValue:s(g),"onUpdate:modelValue":t[3]||(t[3]=r=>j(g)?g.value=r:null),clearable:"",placeholder:"搜索脚本名称或备注"},null,8,["modelValue"]),n(P,null,{default:i(()=>[n(p,{onClick:O},{default:i(()=>t[14]||(t[14]=[C("导入")])),_:1}),n(p,{type:"primary",onClick:f},{default:i(()=>t[15]||(t[15]=[C("新建")])),_:1})]),_:1})])])]),_:1}),e("div",Ht,[!s(H)&&s(c).length===0?(L(),N(nt,{key:0,description:"暂无脚本"})):ft("",!0),n(s(Et),{ref_key:"el",ref:U,modelValue:s(D),"onUpdate:modelValue":t[4]||(t[4]=r=>j(D)?D.value=r:null),ghostClass:"ghost",class:"draggable-content",disabled:s(lt),animation:200,handle:".drag-handle",onStart:G,onUpdate:B,onEnd:B},{default:i(()=>[(L(!0),J(St,null,_t(s(D),r=>(L(),N(at,{key:r.id,id:r.id,onEditorScriptFile:v,"show-hover":s(V),onOpenFile:o,onSetScript:X,onRunScript:y,onDeleteScript:q},null,8,["id","show-hover"]))),128))]),_:1},8,["modelValue","disabled"])])])}}}),Xt=st(Ut,[["__scopeId","data-v-05976d93"]]);export{Xt as default};
