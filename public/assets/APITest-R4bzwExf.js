import{d as de,u as ce,i as t,e as pe,c as O,j as xe,l as w,y as re,a5 as we,o as s,a as c,m as a,g as z,w as i,t as B,b as l,p as F,B as L,n as G,ab as ye,G as ge,bO as Te,a8 as Se,E as me,L as fe,v as Ve,_ as ve,A as he,bP as Ie,bQ as Ae,bR as Ee,H as Le,M as be,bS as ke,a0 as Me,s as Be,z as Oe,bT as ze,a6 as _e,b5 as He,a7 as De,bU as $e,F as ie,D as ue,ak as Ne,aw as Ue,ax as Pe,V as Re,U as Fe,b0 as We}from"./index-D767YE15.js";import{E as qe}from"./el-infinite-scroll-DJoDNyaO.js";import{E as je}from"./el-drawer-DakVXP-_.js";import{E as Ce}from"./el-empty-C55xF_EA.js";import{d as Ge,E as Ke,a as Qe,_ as Je}from"./dataStructure-DJrLD1tV.js";import"./el-checkbox-CezvXfsL.js";import{l as Xe}from"./vue-draggable-plus-B7hlTZXz.js";import{L as Ye}from"./Loading-Bb8i5b2_.js";import"./isArrayLikeObject-CbXCMNMt.js";/* empty css                        */const Ze={class:"api-header drag-handle"},et={class:"info"},tt={key:0,class:"api-details"},ot={class:"api-details-item"},nt={key:0,class:"api-details-item"},lt={key:0},at={key:1},st={key:0},it={key:1},ut={class:"api-details-item"},rt={class:"example-title"},dt=de({__name:"ApiDocumentItem",props:{model:{type:Object},showHover:{type:Boolean,default:!0}},setup(g){ce(n=>({c0e27884:t(S),"72de03ea":t(P),"919c013a":t(x),"4ba7963a":t(q),"68feb14f":t(W),"4a56fa2d":t(Q),"6a3872a6":t(H)}));const{appAsideBgColor:x,appBackground:P}=pe(),k=g,W=O(()=>k.showHover?"4px":"0px"),q=O(()=>k.showHover?"all 0.5s":"none"),_=xe(),y=O(()=>{var e,d;const n=(e=k.model)==null?void 0:e.dialog;return{...n,args:(d=n==null?void 0:n.args)==null?void 0:d.map(p=>(p.componentType==="select"&&p.options&&typeof p.options=="function"&&(p.options=p.options(_)),{...p}))}}),$=O(()=>{var n,e;return((n=y.value)==null?void 0:n.title)||((e=y.value)==null?void 0:e.targetMethodName)}),{invokeDynamicDialog:h}=ye(),f=w(),T=w(!1),S=w("40px"),H=w("hidden"),N=()=>{var e;const n=!T.value;if(n&&!((e=k.model)!=null&&e.document)){ge.closeAll(),ge({title:"该API暂无使用文档",type:"warning",position:"bottom-right"});return}if(n){const d=setTimeout(async()=>{clearTimeout(d),H.value="auto",await K()})}else H.value="hidden";T.value=n},b=w("");re(()=>{var e,d,p;const n=(p=(d=(e=k.model)==null?void 0:e.document)==null?void 0:d.example)==null?void 0:p.code;n&&(b.value=n)});const ae=()=>{var n,e,d,p;if(b.value.length){const V=(n=y.value)==null?void 0:n.targetMethodName,v=Te().find(M=>M.name===V);v?(p=(d=(e=v.testModule)==null?void 0:e.document)==null?void 0:d.example)!=null&&p.code&&(v.testModule.document.example.code=b.value):console.error(`重置示例失败：未找到${V}的测试模块`)}},K=async()=>{var e;const n=document.body.clientHeight;if(T.value){await Se();const d=((e=f.value)==null?void 0:e.clientHeight)||0,p=Math.min(d?d+22:0,420+(n-661>0?(n-661)/2:0));Q.value=p+"px",S.value=40+p+"px"}else S.value="40px"},Q=w("420px");we(async()=>{var n,e,d;(d=(e=(n=k.model)==null?void 0:n.document)==null?void 0:e.example)==null||d.code,await K()});const se=O(()=>{var n,e;return Ge.genTreeArrNodeId(((e=(n=k.model)==null?void 0:n.document)==null?void 0:e.params)||[])});return(n,e)=>{var X,m,o;const d=me,p=fe,V=Ve,v=Ke,M=Qe,J=Je,D=Ce;return s(),c("div",{class:"api-doc-item",onClick:N},[a("div",Ze,[a("div",et,[t(T)?(s(),z(d,{key:1,class:"icon"},{default:i(()=>e[6]||(e[6]=[a("span",{"i-solar-alt-arrow-down-line-duotone":""},null,-1)])),_:1})):(s(),z(d,{key:0,class:"icon"},{default:i(()=>e[5]||(e[5]=[a("span",{"i-solar-alt-arrow-right-line-duotone":""},null,-1)])),_:1})),a("span",null,"["+B((X=t(y))==null?void 0:X.targetMethodName)+"]"+B(t($)),1)]),l(V,{effect:"dark",content:"测试调用",placement:"left"},{default:i(()=>[l(p,{size:"small",type:"primary",circle:"",onClick:e[0]||(e[0]=F(u=>{var C,I,A;return t(h)((C=t(y))==null?void 0:C.targetMethodName,(I=t(y))==null?void 0:I.targetMethodName,(A=t(y))==null?void 0:A.content,"test")},["stop"]))},{default:i(()=>[l(d,{size:"large"},{default:i(()=>e[7]||(e[7]=[a("span",{"i-mdi-bug-play":""},null,-1)])),_:1})]),_:1})]),_:1})]),t(T)?(s(),c("div",tt,[(m=g.model)!=null&&m.document?(s(),c("div",{key:0,class:"content",ref_key:"detailsContentRef",ref:f},[a("div",ot,[e[8]||(e[8]=a("span",null,"方法名：",-1)),a("span",null,B((o=t(y))==null?void 0:o.targetMethodName),1)]),g.model.document.howToUse?(s(),c("div",nt,[e[9]||(e[9]=a("span",null,"方法描述：",-1)),a("span",null,B(g.model.document.howToUse),1)])):L("",!0),g.model.document.params?(s(),c("div",{key:1,class:"api-details-item",onClick:e[1]||(e[1]=F(()=>{},["stop"]))},[e[12]||(e[12]=a("span",null,"参数：",-1)),l(M,{"default-expand-all":"",data:t(se),"table-layout":"auto","row-key":"id"},{default:i(()=>[l(v,{prop:"name",label:"参数名"}),l(v,{prop:"required",label:"必填"},{default:i(u=>[u.row.required?(s(),c("span",lt,"是")):(s(),c("span",at,"否"))]),_:1}),l(v,{prop:"instructions",label:"说明",width:"240"}),l(v,{prop:"type",label:"类型"},{default:i(u=>{var C;return[typeof u.row.type=="string"?(s(),c("span",st,B(u.row.type),1)):(s(),c("span",it,[e[11]||(e[11]=G("enum")),l(V,{effect:"dark",content:((C=u.row.type)==null?void 0:C.join(","))||"",placement:"top-start"},{default:i(()=>[l(d,null,{default:i(()=>e[10]||(e[10]=[a("span",{"i-mdi-information-variant":""},null,-1)])),_:1})]),_:2},1032,["content"])]))]}),_:1}),l(v,{prop:"default",label:"默认值"})]),_:1},8,["data"])])):L("",!0),a("div",ut,[e[13]||(e[13]=a("span",null,"返回值：",-1)),a("span",null,B(g.model.document.returnValue.instructions||""),1),g.model.document.returnValue.type?(s(),z(J,{key:0,"raw-code":g.model.document.returnValue.type,"show-copy":!1,onClick:e[2]||(e[2]=F(()=>{},["stop"]))},null,8,["raw-code"])):L("",!0)]),g.model.document.example?(s(),c("div",{key:2,class:"api-details-item",onClick:e[4]||(e[4]=F(()=>{},["stop"]))},[a("span",rt,[g.model.document.example.code!==t(b)?(s(),z(V,{key:0,effect:"dark",content:"恢复默认示例代码",placement:"top-start"},{default:i(()=>[l(d,{class:"refreshCode",onClick:F(ae,["stop"])},{default:i(()=>e[14]||(e[14]=[a("span",{"i-mdi-file-sync-outline":""},null,-1)])),_:1})]),_:1})):L("",!0),e[15]||(e[15]=G("示例："))]),a("span",null,B(g.model.document.example.title),1),l(J,{"raw-code":g.model.document.example.code,onClick:e[3]||(e[3]=F(()=>{},["stop"]))},null,8,["raw-code"])])):L("",!0)],512)):(s(),z(D,{key:1,description:"该API暂无使用文档"}))])):L("",!0)])}}}),ct=ve(dt,[["__scopeId","data-v-63136b58"]]),pt={class:"header-r"},mt=de({__name:"ATHeader",props:{openOutput:{type:Function,required:!0},changeSearchValue:{type:Function,required:!0}},setup(g){ce(h=>({"33a59dec":t(q),"319e2b04":t(W)}));const x=w(""),P=()=>{Ie().hide();const h=Ae().find(f=>f.label==="main");h&&h.setFocus()},{isMainWindow:k}=ke(),{appAsideBgColor:W,appBackground:q}=pe();let _=0,y;const $=()=>{++_>3&&Ee.confirm("是否前往首页","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{k&&(k.value=!0),Le.push("/")}),y&&clearTimeout(y),y=setTimeout(()=>{_=0},500)};return(h,f)=>{const T=be,S=me,H=fe;return s(),c("div",null,[a("div",{"data-tauri-drag-region":"",style:{width:"25%",cursor:"move"}},[a("span",{onClick:$},"调试")]),a("div",pt,[f[4]||(f[4]=a("div",{"data-tauri-drag-region":"",style:{cursor:"move"},class:"move"},null,-1)),l(T,{onInput:f[0]||(f[0]=N=>g.changeSearchValue(t(x))),class:"input",modelValue:t(x),"onUpdate:modelValue":f[1]||(f[1]=N=>he(x)?x.value=N:null),clearable:"",placeholder:"可输入API的关键字对API进行筛选"},null,8,["modelValue"]),l(H,{class:"circle-btn",type:"info",circle:"",onClick:g.openOutput},{default:i(()=>[l(S,null,{default:i(()=>f[2]||(f[2]=[a("span",{"i-solar-notification-unread-linear":""},null,-1)])),_:1})]),_:1},8,["onClick"]),l(H,{class:"circle-btn",type:"info",circle:"",onClick:P},{default:i(()=>[l(S,null,{default:i(()=>f[3]||(f[3]=[a("span",{"i-mdi-minus":""},null,-1)])),_:1})]),_:1})])])}}}),ft=ve(mt,[["__scopeId","data-v-39a70d96"]]),vt={class:"remd"},gt={key:0,class:"api-test-bar","data-tauri-drag-region":"",style:{cursor:"move"}},_t={key:1,class:"end"},wt={class:"loading-box"},yt=["id"],ht={key:1,class:"empty-show"},bt=de({__name:"APITest",setup(g){ce(m=>({"926cbe6c":t(N),ca51bb12:t(H)}));const x=w(!0),P=w(),{builtInApiTestModules:k,moveBuiltInApiIndex:W,setTestModuleCtx:q}=ye(),{info:_,windowInnerWidth:y}=$e(),$=Me(),{app:h}=Be($),f=w(!0),T=w(!1),{isMainWindow:S}=ke(),{appBackground:H}=pe(),N=w("10px"),b=w(""),ae=O(()=>b.value!==""),K=()=>{x.value=!1},Q=()=>{x.value=!0},se=m=>{const{oldIndex:o,newIndex:u}=m;o!==void 0&&u!==void 0&&W(o,u),Q()},n=w([]),e=()=>{n.value=[]},d=O(()=>_.showContentType==="apiTest"&&y.value<820),p=O(()=>+h.value.modulesSetting.drawerSize.replace("%","")*3-40);let V=null;we(()=>{const m=_.apiTest.searchValue;V&&clearTimeout(V),V=setTimeout(()=>{b.value!==m&&(b.value=m)},500)});const v=w(0);let M=0;re(()=>{const m=P.value;v.value=Math.ceil(m.offsetHeight/43)+1;const o=setTimeout(()=>{f.value=!1,clearTimeout(o)},500);$.isInited||$.init(),Oe.closeSplashscreen()});const J=async()=>{v.value<M?v.value=Math.min(v.value+5,M):v.value===M&&(T.value=!0)},D=O({get:()=>{const m=[...k.value.filter(o=>{var u,C,I,A,R,j,Y,Z,ee,te,oe,ne,le;return b.value?((I=(u=o.dialog.targetMethodName)==null?void 0:u.toLocaleLowerCase())==null?void 0:I.includes((C=b.value)==null?void 0:C.toLocaleLowerCase()))||((j=(A=o.dialog.title)==null?void 0:A.toLocaleLowerCase())==null?void 0:j.includes((R=b.value)==null?void 0:R.toLocaleLowerCase()))||((ee=(Y=o.dialog.content)==null?void 0:Y.toLocaleLowerCase())==null?void 0:ee.includes((Z=b.value)==null?void 0:Z.toLocaleLowerCase()))||((ne=(te=o.document.howToUse)==null?void 0:te.toLocaleLowerCase())==null?void 0:ne.includes((oe=b.value)==null?void 0:oe.toLocaleLowerCase()))||((le=o.document.searchKeys)==null?void 0:le.some(r=>{var U;return r==null?void 0:r.toLocaleLowerCase().includes((U=b.value)==null?void 0:U.toLocaleLowerCase())})):!0})].sort((o,u)=>u.weight-o.weight);return M=m.length,m.slice(0,v.value)},set:m=>{v.value=m.length}});ze(()=>{S.value||(N.value="0")});const X=(m,o="")=>{h.value.modulesSetting.autoOpenOutput&&(_.apiTest.openOutput=!0);const u=new Date,C=u.getHours()<10?"0"+u.getHours():u.getHours(),I=u.getMinutes()<10?"0"+u.getMinutes():u.getMinutes(),A=u.getSeconds()<10?"0"+u.getSeconds():u.getSeconds(),R=`[${C}:${I}:${A}] `;n.value.unshift(R+o+"：	"+m)};return re(()=>{q({showDetails:X})}),(m,o)=>{const u=ft,C=be,I=me,A=fe,R=ct,j=Ce,Y=Ue,Z=Pe,ee=Re,te=Fe,oe=We,ne=je,le=qe;return s(),c("div",vt,[t(S)?L("",!0):(s(),z(u,{key:0,class:"alone-page-header",openOutput:()=>t(_).apiTest.openOutput=!0,changeSearchValue:r=>t(_).apiTest.searchValue=r},null,8,["openOutput","changeSearchValue"])),_e((s(),c("div",{class:"page-content",ref_key:"pageContentRef",ref:P,"infinite-scroll-distance":40,"infinite-scroll-immediate":!1},[l(He,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:i(()=>[t(d)&&t(S)?(s(),c("div",gt,[l(C,{class:"search-ipt",modelValue:t(_).apiTest.searchValue,"onUpdate:modelValue":o[0]||(o[0]=r=>t(_).apiTest.searchValue=r),clearable:"",placeholder:"可输入API的关键字对API进行筛选"},null,8,["modelValue"]),l(A,{class:"output-btn",onClick:o[1]||(o[1]=r=>t(_).apiTest.openOutput=!0)},{default:i(()=>[l(I,null,{default:i(()=>o[6]||(o[6]=[a("span",{"i-solar-notification-unread-linear":""},null,-1)])),_:1})]),_:1})])):L("",!0)]),_:1}),l(t(Xe),{ref:"el",modelValue:t(D),"onUpdate:modelValue":o[2]||(o[2]=r=>he(D)?D.value=r:null),animation:200,ghostClass:"ghost",class:"draggable-content",handle:".drag-handle",disabled:t(ae),onUpdate:se,onStart:K},{default:i(()=>[(s(!0),c(ie,null,ue(t(D),r=>{var U,E;return s(),z(R,{key:((U=r==null?void 0:r.dialog)==null?void 0:U.targetMethodName)||((E=r==null?void 0:r.dialog)==null?void 0:E.title),model:r,"show-hover":t(x)},null,8,["model","show-hover"])}),128))]),_:1},8,["modelValue","disabled"]),t(D).length?L("",!0):(s(),z(j,{key:0,description:"没有找到相应的API"})),t(T)?(s(),c("div",_t," ------到底了，共"+B(t(D).length)+"个API------ ",1)):L("",!0),_e(a("div",wt,[l(Ye),o[7]||(o[7]=G("加载中... "))],512),[[De,t(f)]])])),[[le,J]]),l(ne,{modelValue:t(_).apiTest.openOutput,"onUpdate:modelValue":o[5]||(o[5]=r=>t(_).apiTest.openOutput=r),title:"",direction:"btt",size:t(h).modulesSetting.drawerSize,class:"drawer-output"},{header:i(({titleId:r,titleClass:U})=>[a("h4",{id:r,class:Ne(U)},"API测试-输出结果",10,yt),l(Z,{modelValue:t(h).modulesSetting.drawerSize,"onUpdate:modelValue":o[3]||(o[3]=E=>t(h).modulesSetting.drawerSize=E),placeholder:"大小",size:"small",class:"options select"},{default:i(()=>[(s(),c(ie,null,ue(8,E=>l(Y,{key:E,label:20+E*10+"%",value:20+E*10+"%"},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),l(ee,{class:"options",modelValue:t(h).modulesSetting.autoOpenOutput,"onUpdate:modelValue":o[4]||(o[4]=E=>t(h).modulesSetting.autoOpenOutput=E),"inline-prompt":"",style:{"--el-switch-on-color":"var(--el-color-primary)","--el-switch-off-color":"#ccc"},"active-text":"自动显示","inactive-text":"手动显示"},null,8,["modelValue"]),l(A,{class:"options",size:"small",onClick:e},{default:i(()=>[l(I,null,{default:i(()=>o[8]||(o[8]=[a("span",{"i-mdi-playlist-remove":""},null,-1)])),_:1}),o[9]||(o[9]=G("清空输出 "))]),_:1})]),default:i(()=>[t(n).length?(s(),z(oe,{key:0,class:"output"},{default:i(()=>[(s(!0),c(ie,null,ue(t(n),r=>(s(),c("div",{key:r,class:"output-text"},[l(te,{size:"small"},{default:i(()=>[G(B(r),1)]),_:2},1024)]))),128))]),_:1})):(s(),c("div",ht,[l(j,{description:"暂无输出","image-size":t(p),style:{"margin-top":"-40px"}},null,8,["image-size"])]))]),_:1},8,["modelValue","size"])])}}}),Mt=ve(bt,[["__scopeId","data-v-1374fb07"]]);export{Mt as default};
